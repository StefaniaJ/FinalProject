const emailPattern=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,phonePattern=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{2,4}$/,verifiedForms={};function validateInput(e){removeError(e.parentElement),e.style.backgroundPositionX="96%",e.style.backgroundPositionY="50%",e.style.borderColor="#15a32b",e.style.backgroundSize="20px 20px",e.style.backgroundRepeat="no-repeat",e.style.setProperty("background-image","url(images/verified.png)","important"),verifiedForms[e.parentElement.parentElement.id][e.name]=!0}function restoreInput(e){removeError(e.parentElement),e.style.borderColor="#deddd9",e.style.backgroundRepeat="no-repeat",e.style.backgroundImage=""}function appendError(e,t){removeError(e);const n=document.createElement("DIV");n.className="errorDiv",n.style.color="red",n.style.width="90%",n.style["text-align"]="left",n.style.margin="auto",n.style.marginBottom="1.2em",n.innerHTML=t,e.appendChild(n)}function removeError(e){const t=e.getElementsByClassName("errorDiv")[0];t&&(t.innerHTML="",t.style.height="0px",e.removeChild(t))}function invalidateInput(e,t="Something went wrong"){appendError(e.parentElement,t),e.style.backgroundPositionX="96%",e.style.backgroundPositionY="50%",e.style.borderColor="red",e.style.marginBottom="5px",e.style.backgroundSize="20px 20px",e.style.backgroundRepeat="no-repeat",e.style.backgroundImage="url(images/exclamation-mark.png)"}function attachEventListeners(e,t,n=null){console.log(e.parentElement),e.addEventListener("focus",()=>restoreInput(e)),e.addEventListener("focusout",function(){if(this.value.length>0)if(n&&n.test(e.value))validateInput(e);else if(n&&!n.test(e.value)){let t="Field is incorrect";switch(e.name){case"email":t="Please enter valid email";break;case"phone":t="Please enter valid phone number"}invalidateInput(e,t)}else n||validateInput(e);else restoreInput(e)})}function submitButtonHandler(e,t){e.addEventListener("click",function(n){console.log("button clicked");const r={};let o=!0;for(const n of t){r[n.name]=n.value;let t="Something went wrong",a=null;if(n.value.length<1){switch(n.name){case"name":t="Name field is required";break;case"email":t="Email field is required",a=emailPattern;break;case"phone":t="Phone field is required",a=phonePattern;break;case"message":t="Message field is required"}o=!1,invalidateInput(n,t)}else verifiedForms[e.parentElement.id]&&!verifiedForms[e.parentElement.id][n.name]&&(o=!1)}if(!o)return;document.querySelector(".loading-btn").style.display="inline-block";const a=JSON.stringify(r);fetch("https://crunchdatabase-8fb6.restdb.io/rest/userscontactinfo",{method:"post",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5ecaa66f4a532801892ed711","cache-control":"no-cache"},body:a}).then(e=>(document.querySelector(".loading-btn").style.display="none",e.json())).then(t=>{document.querySelector(".loading-btn").style.display="none",e.parentElement.style.display="none",document.querySelector(".hide").style.display="block",console.log(t)}).catch(e=>{document.querySelector(".loading-btn").style.display="none",console.log(e)})})}function validateForm(e){const t=document.getElementById(e).getElementsByTagName("input"),n=document.getElementById(e).getElementsByTagName("button")[0];for(const n of t){verifiedForms[e]||(verifiedForms[e]={}),verifiedForms[e][n.name]=!1;let t="Something went wrong",r=null;switch(n.name){case"name":t="Name field is required";break;case"email":t="Email field is required",r=emailPattern;break;case"phone":t="Phone field is required",r=phonePattern;break;case"message":t="Message field is required"}attachEventListeners(n,t,r)}submitButtonHandler(n,t)}